<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign In</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-50 h-screen flex items-center justify-center">
<div class="bg-white p-8 rounded-2xl shadow-lg w-96">
<h1 class="text-2xl font-bold mb-2 text-center">Sign In</h1>
<p class="text-sm text-gray-500 mb-4 text-center">Admin or Student</p>
<form id="login-form" class="space-y-4">
<div><label class="block text-sm font-medium text-gray-700">Email</label><input type="email" id="email" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required></div>
<div><label class="block text-sm font-medium text-gray-700">Password</label><input type="password" id="password" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required></div>
<div id="error-msg" class="text-red-500 text-sm hidden"></div>
<button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700">Sign In</button>
<div class="text-sm text-center mt-3"><a href="/signup" class="text-blue-600 underline">Create a student account</a></div>
</form>
</div>
<script>
document.getElementById('login-form').addEventListener('submit',async(e)=>{e.preventDefault();const email=document.getElementById('email').value;const password=document.getElementById('password').value;const errorMsg=document.getElementById('error-msg');try{const response=await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email,password})});const data=await response.json();if(response.ok){if(data.role==='admin'){window.location.href='/admin';}else{window.location.href='/chat';}}else{errorMsg.innerText=data.error||'Login failed';errorMsg.classList.remove('hidden');}}catch(err){errorMsg.innerText='Network error';errorMsg.classList.remove('hidden');}});
</script>
</body>
</html>
